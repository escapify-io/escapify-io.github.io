<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursos Educativos - Escapify</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/accessibility.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Skip to content para accesibilidad con teclado -->
    <a href="#main-content" class="skip-to-content">Saltar al contenido principal</a>

    <!-- Header de navegación -->
    <header class="main-header" role="banner">
        <nav class="nav-container" role="navigation" aria-label="Navegación principal">
            <a href="/" class="nav-logo">
                <i class="fas fa-lock" aria-hidden="true"></i>
                Escapify
            </a>

            <button class="mobile-menu-btn" id="mobile-menu-btn" aria-expanded="false" aria-controls="nav-menu" aria-label="Menú de navegación">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </button>

            <ul class="nav-menu" id="nav-menu">
                <li><a href="/" class="nav-link">Inicio</a></li>
                <li><a href="/generador.html" class="nav-link">Generador</a></li>
                <li><a href="/historial.html" class="nav-link">Historial</a></li>
                <li><a href="/recursos.html" class="nav-link active" aria-current="page">Recursos</a></li>
                <li><a href="/cifrados.html" class="nav-link">Cifrados</a></li>
                <li><a href="/ayuda.html" class="nav-link">Ayuda</a></li>
                <li>
                    <button class="theme-toggle" id="themeToggle" aria-label="Cambiar tema oscuro/claro">
                        <i class="fas fa-moon" aria-hidden="true"></i>
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="history-hero" aria-labelledby="resources-title">
        <div class="container">
            <h1 class="section-title" id="resources-title">Recursos Educativos</h1>
            <p class="section-subtitle">Descubre herramientas y materiales para potenciar tus escape rooms educativos</p>
        </div>
    </section>

    <main class="container" id="main-content">
        <!-- Sección de filtros: ocupa todo el ancho -->
        <section class="filters-section">
            <h2>Explora nuestros recursos</h2>
            <div class="resource-filters">
                <div class="search-box">
                    <input type="text" placeholder="Buscar recursos..." aria-label="Buscar recursos">
                    <i class="fas fa-search" aria-hidden="true"></i>
                </div>
                <div class="filter-options">
                    <select id="resourceTypeFilter" aria-label="Filtrar por tipo de recurso">
                        <option value="all">Todos los tipos</option>
                        <option value="template">Plantillas</option>
                        <option value="material">Materiales</option>
                        <option value="guide">Guías</option>
                        <option value="activity">Actividades</option>
                    </select>
                    <select id="educationLevelFilter" aria-label="Filtrar por nivel educativo">
                        <option value="all">Todos los niveles</option>
                        <option value="primary">Primaria</option>
                        <option value="secondary">Secundaria</option>
                        <option value="high">Bachillerato</option>
                        <option value="university">Universidad</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Grid de recursos en 3 columnas -->
        <section class="resources-section">
            <h2 class="section-title">Recursos y Descargas</h2>
            <!-- <p class="section-subtitle">Descarga plantillas y materiales útiles para tus escape rooms educativos.</p> -->
            <div class="resources-grid resources-grid-3cols">
                <!-- Plantilla de Candado Numérico -->
                <div class="resource-card">
                    <div class="resource-icon"><i class="fas fa-lock" aria-hidden="true"></i></div>
                    <h3>Plantilla de Candado Numérico</h3>
                    <p>Plantilla editable para crear candados numéricos en PDF.</p>
                    <a href="/recursos/plantilla-candado-numerico.pdf" class="btn btn-secondary" download role="button" aria-label="Descargar plantilla de candado numérico en PDF" tabindex="0">Descargar PDF</a>
                    <a href="/recursos/plantilla-candado-numerico.html" class="btn btn-preview" target="_blank" role="button" aria-label="Vista previa de la plantilla de candado numérico">Vista previa</a>
                </div>
                <!-- Plantilla de Candado de Palabra -->
                <div class="resource-card">
                    <div class="resource-icon"><i class="fas fa-key" aria-hidden="true"></i></div>
                    <h3>Plantilla de Candado de Palabra</h3>
                    <p>Plantilla para candados de palabras, lista para imprimir o editar.</p>
                    <a href="/recursos/plantilla-candado-palabra.docx" class="btn btn-secondary" download role="button" aria-label="Descargar plantilla de candado de palabra en Word" tabindex="0">Descargar Word</a>
                    <a href="#" class="btn btn-preview" onclick="alert('Vista previa no disponible en este ejemplo');return false;" role="button" aria-label="Vista previa de la plantilla de candado de palabra">Vista previa</a>
                </div>
                <!-- Plantilla de Cifrado César -->
                <div class="resource-card">
                    <div class="resource-icon"><i class="fas fa-user-secret" aria-hidden="true"></i></div>
                    <h3>Plantilla de Cifrado César</h3>
                    <p>Tabla y hoja de trabajo para cifrados tipo César.</p>
                    <a href="/recursos/plantilla-cifrado-cesar.pdf" class="btn btn-secondary" download role="button" aria-label="Descargar plantilla de cifrado César en PDF" tabindex="0">Descargar PDF</a>
                    <a href="#" class="btn btn-preview" onclick="alert('Vista previa no disponible en este ejemplo');return false;" role="button" aria-label="Vista previa de la plantilla de cifrado César">Vista previa</a>
                </div>
                <!-- Guía rápida para profesorado -->
                <div class="resource-card">
                    <div class="resource-icon"><i class="fas fa-chalkboard-teacher" aria-hidden="true"></i></div>
                    <h3>Guía rápida para profesorado</h3>
                    <p>Consejos y pasos para usar candados digitales en el aula.</p>
                    <a href="/recursos/guia-profesorado.pdf" class="btn btn-secondary" download role="button" aria-label="Descargar guía rápida para profesorado en PDF" tabindex="0">Descargar PDF</a>
                    <a href="#" class="btn btn-preview" onclick="alert('Vista previa no disponible en este ejemplo');return false;" role="button" aria-label="Vista previa de la guía rápida para profesorado">Vista previa</a>
                </div>
            </div>
        </section>

        <section class="resources-section" id="templates">
            <div class="section-header">
                <h2>Plantillas de pruebas</h2>
                <button class="btn btn-primary">Ver todas</button>
            </div>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-file-alt" aria-hidden="true"></i>
                    </div>
                    <h3>Plantilla de Pistas Secuenciales</h3>
                    <p>Estructura para crear una secuencia de pistas que conducen a la solución final de un escape.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Plantilla</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar plantilla de pistas secuenciales" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-puzzle-piece" aria-hidden="true"></i>
                    </div>
                    <h3>Retos Matemáticos Progresivos</h3>
                    <p>Serie de problemas matemáticos encadenados con dificultad creciente para integrar en tus escapes.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Plantilla</span>
                        <span class="resource-level">Secundaria</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar retos matemáticos progresivos" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-language" aria-hidden="true"></i>
                    </div>
                    <h3>Escape Room de Idiomas</h3>
                    <p>Plantilla completa para crear un escape room centrado en el aprendizaje de vocabulario y gramática.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Plantilla</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar plantilla de escape room de idiomas" tabindex="0">Descargar</a>
                </div>
            </div>
        </section>

        <section class="resources-section" id="materials">
            <div class="section-header">
                <h2>Materiales educativos</h2>
                <button class="btn btn-primary">Ver todos</button>
            </div>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-print" aria-hidden="true"></i>
                    </div>
                    <h3>Kit de Cajas y Candados Imprimibles</h3>
                    <p>Plantillas para imprimir y construir cajas, candados y otros elementos físicos para tus escape rooms.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Material</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar kit de cajas y candados imprimibles" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-vial" aria-hidden="true"></i>
                    </div>
                    <h3>Experimentos Científicos para Escape Rooms</h3>
                    <p>Guía con 10 experimentos científicos sencillos que pueden integrarse como pruebas en un escape room.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Material</span>
                        <span class="resource-level">Primaria/Secundaria</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar guía de experimentos científicos para escape rooms" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-book" aria-hidden="true"></i>
                    </div>
                    <h3>Tarjetas de Pistas y Acertijos</h3>
                    <p>Colección de 50 tarjetas imprimibles con acertijos y pistas listas para usar en cualquier escape room.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Material</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar tarjetas de pistas y acertijos" tabindex="0">Descargar</a>
                </div>
            </div>
        </section>

        <section class="resources-section" id="challenges">
            <div class="section-header">
                <h2>Tipos de pruebas</h2>
                <button class="btn btn-primary">Ver todos</button>
            </div>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-lightbulb" aria-hidden="true"></i>
                    </div>
                    <h3>Retos Lógico-Deductivos</h3>
                    <p>Catálogo de 20 tipos de pruebas basadas en la lógica y el razonamiento deductivo para diferentes niveles.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Guía</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Ver guía de retos lógico-deductivos" tabindex="0">Ver guía</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-code" aria-hidden="true"></i>
                    </div>
                    <h3>Pruebas de Codificación y Cifrado</h3>
                    <p>15 sistemas de codificación y cifrado con plantillas y soluciones para implementar en tu escape room.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Guía</span>
                        <span class="resource-level">Secundaria/Bachillerato</span>
                    </div>
                    <a href="#" class="btn btn-secondary view-coding-guide" data-resource-id="coding-systems" role="button" aria-label="Ver guía de pruebas de codificación y cifrado" tabindex="0">Ver guía</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-gamepad" aria-hidden="true"></i>
                    </div>
                    <h3>Retos de Colaboración en Equipo</h3>
                    <p>Pruebas diseñadas para fomentar la colaboración y comunicación entre los participantes.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Guía</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Ver guía de retos de colaboración en equipo" tabindex="0">Ver guía</a>
                </div>
            </div>
        </section>

        <section class="resources-section" id="gamification">
            <div class="section-header">
                <h2>Recursos de gamificación</h2>
                <button class="btn btn-primary">Ver todos</button>
            </div>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-trophy" aria-hidden="true"></i>
                    </div>
                    <h3>Sistema de Insignias y Recompensas</h3>
                    <p>Marco completo para implementar un sistema de insignias, puntos y recompensas en entornos educativos.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Kit</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar sistema de insignias y recompensas" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-chart-line" aria-hidden="true"></i>
                    </div>
                    <h3>Tableros de Progresión</h3>
                    <p>Plantillas de tableros visuales para seguir el progreso de los estudiantes en actividades gamificadas.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Plantilla</span>
                        <span class="resource-level">Primaria/Secundaria</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar plantillas de tableros de progresión" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-users" aria-hidden="true"></i>
                    </div>
                    <h3>Roles en Equipos Gamificados</h3>
                    <p>Guía para implementar un sistema de roles complementarios en equipos, maximizando la participación.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Guía</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Ver guía de roles en equipos gamificados" tabindex="0">Ver guía</a>
                </div>
            </div>
        </section>

        <section class="resources-section" id="narratives">
            <div class="section-header">
                <h2>Narrativas y temas</h2>
                <button class="btn btn-primary">Ver todos</button>
            </div>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-book-open" aria-hidden="true"></i>
                    </div>
                    <h3>Arqueólogos del Conocimiento</h3>
                    <p>Narrativa completa basada en una expedición arqueológica, adaptable a diferentes asignaturas.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Narrativa</span>
                        <span class="resource-level">Primaria/Secundaria</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar narrativa Arqueólogos del Conocimiento" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-space-shuttle" aria-hidden="true"></i>
                    </div>
                    <h3>Misión Espacial: Aprendizaje</h3>
                    <p>Marco narrativo espacial con misiones progresivas ideal para ciencias, matemáticas y tecnología.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Narrativa</span>
                        <span class="resource-level">Todos los niveles</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar narrativa Misión Espacial: Aprendizaje" tabindex="0">Descargar</a>
                </div>

                <div class="resource-card">
                    <div class="resource-icon">
                        <i class="fas fa-landmark" aria-hidden="true"></i>
                    </div>
                    <h3>Viaje a través de la Historia</h3>
                    <p>Narrativa histórica con desafíos ambientados en diferentes épocas, personalizable por periodo.</p>
                    <div class="resource-meta">
                        <span class="resource-type">Narrativa</span>
                        <span class="resource-level">Secundaria/Bachillerato</span>
                    </div>
                    <a href="#" class="btn btn-secondary" role="button" aria-label="Descargar narrativa Viaje a través de la Historia" tabindex="0">Descargar</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de Sistemas de Codificación -->
    <div id="codingSystemsModal" class="resource-modal">
        <div class="resource-modal-content">
            <div class="resource-modal-header">
                <h2>Pruebas de Codificación y Cifrado</h2>
                <button class="close-modal" aria-label="Cerrar modal">&times;</button>
            </div>
            <div class="resource-modal-body">
                <div class="resource-intro">
                    <p class="resource-description">Esta guía contiene 15 sistemas de codificación y cifrado que puedes implementar fácilmente en tus escape rooms educativos. Cada sistema incluye una explicación, ejemplos y recursos para crear tus propios desafíos.</p>
                    
                    <div class="resource-actions">
                        <a href="#" class="btn btn-primary download-resource" data-resource="coding-systems">
                            <i class="fas fa-download"></i> Descargar guía completa
                        </a>
                        <button class="btn btn-secondary print-resource">
                            <i class="fas fa-print"></i> Imprimir
                        </button>
                    </div>
                </div>

                <div class="coding-systems-container">
                    <!-- Sistema 1: Código César -->
                    <div class="coding-system">
                        <h3>1. Código César</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>El Código César es uno de los sistemas de cifrado más antiguos y sencillos. Consiste en desplazar cada letra del mensaje un número fijo de posiciones en el alfabeto.</p>
                                <p>Por ejemplo, con un desplazamiento de 3 posiciones:</p>
                                <ul>
                                    <li>A → D</li>
                                    <li>B → E</li>
                                    <li>C → F</li>
                                    <li>...</li>
                                </ul>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Elige un desplazamiento (por ejemplo, 3 posiciones).</li>
                                    <li>Crea una pista que sugiera ese desplazamiento.</li>
                                    <li>Cifra el mensaje o código de desbloqueo.</li>
                                </ol>
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong> "HQFRQWUDVWH OD OODYH" (con desplazamiento 3) → "ENCONTRASTE LA LLAVE"</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="caesar-playground">
                                    <div class="input-group">
                                        <label for="caesarInput">Texto original:</label>
                                        <input type="text" id="caesarInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <div class="input-group">
                                        <label for="caesarShift">Desplazamiento:</label>
                                        <input type="number" id="caesarShift" value="3" min="1" max="25">
                                    </div>
                                    <button class="btn btn-secondary encode-caesar">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="caesarResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 2: Código Morse -->
                    <div class="coding-system">
                        <h3>2. Código Morse</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>El código Morse representa letras y números mediante secuencias de puntos y rayas (o señales cortas y largas).</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Proporciona una tabla de conversión Morse o pistas para encontrarla.</li>
                                    <li>Presenta el mensaje codificado en puntos y rayas o mediante sonidos/luces.</li>
                                </ol>
                                <div class="morse-table">
                                    <div class="morse-row">
                                        <div class="morse-cell">A: .-</div>
                                        <div class="morse-cell">B: -...</div>
                                        <div class="morse-cell">C: -.-.</div>
                                        <div class="morse-cell">D: -..</div>
                                    </div>
                                    <div class="morse-row">
                                        <div class="morse-cell">E: .</div>
                                        <div class="morse-cell">F: ..-.</div>
                                        <div class="morse-cell">G: --.</div>
                                        <div class="morse-cell">H: ....</div>
                                    </div>
                                    <div class="morse-row">
                                        <div class="morse-cell">I: ..</div>
                                        <div class="morse-cell">J: .---</div>
                                        <div class="morse-cell">K: -.-</div>
                                        <div class="morse-cell">L: .-..</div>
                                    </div>
                                    <div class="morse-row">
                                        <div class="morse-cell">M: --</div>
                                        <div class="morse-cell">N: -.</div>
                                        <div class="morse-cell">O: ---</div>
                                        <div class="morse-cell">P: .--.</div>
                                    </div>
                                </div>
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong> "... --- ..." → "SOS"</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="morse-playground">
                                    <div class="input-group">
                                        <label for="morseInput">Texto original:</label>
                                        <input type="text" id="morseInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-morse">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="morseResult"></div>
                                        <button class="btn btn-small play-morse">
                                            <i class="fas fa-volume-up"></i> Escuchar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 3: Cifrado de Sustitución -->
                    <div class="coding-system">
                        <h3>3. Cifrado de Sustitución</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>En un cifrado de sustitución, cada letra se reemplaza por un símbolo, número u otra letra según una clave predefinida.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Crea tu propio alfabeto sustituto usando símbolos, imágenes o letras.</li>
                                    <li>Esconde la clave de desciframiento como parte del desafío.</li>
                                </ol>
                                <div class="system-example">
                                    <img src="https://via.placeholder.com/400x150?text=Ejemplo+de+cifrado+de+sustitucion" alt="Ejemplo de alfabeto de sustitución" class="img-fluid">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 4: Cifrado de Polibio -->
                    <div class="coding-system">
                        <h3>4. Cifrado de Polibio</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>Creado por el historiador griego Polibio en el siglo II a.C., este cifrado usa una cuadrícula 5x5 en la que cada letra corresponde a un par de números. Fue utilizado para enviar mensajes con señales de fuego.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Crear una cuadrícula 5x5 con el alfabeto.</li>
                                    <li>Cada letra se codifica con dos números: fila y columna.</li>
                                </ol>
                                
                                <div class="polybius-grid">
                                    <table>
                                        <tr>
                                            <th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th>
                                        </tr>
                                        <tr>
                                            <th>1</th><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td>
                                        </tr>
                                        <tr>
                                            <th>2</th><td>F</td><td>G</td><td>H</td><td>I/J</td><td>K</td>
                                        </tr>
                                        <tr>
                                            <th>3</th><td>L</td><td>M</td><td>N</td><td>O</td><td>P</td>
                                        </tr>
                                        <tr>
                                            <th>4</th><td>Q</td><td>R</td><td>S</td><td>T</td><td>U</td>
                                        </tr>
                                        <tr>
                                            <th>5</th><td>V</td><td>W</td><td>X</td><td>Y</td><td>Z</td>
                                        </tr>
                                    </table>
                                </div>
                                
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong> "HOLA" → "23 34 31 11"</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="polybius-playground">
                                    <div class="input-group">
                                        <label for="polybiusInput">Texto original:</label>
                                        <input type="text" id="polybiusInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-polybius">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="polybiusResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 5: Cifrado de Pigpen (Francmasón) -->
                    <div class="coding-system">
                        <h3>5. Cifrado Francmasón (Pigpen)</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>Este cifrado, popular entre los francmasones del siglo XVIII, utiliza símbolos geométricos en lugar de letras. Cada letra se representa por un fragmento de una cuadrícula o "corral".</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Crear dos rejillas y dos cruces en X con las letras del alfabeto.</li>
                                    <li>Para cifrar, reemplazar cada letra por su símbolo correspondiente.</li>
                                </ol>
                                
                                <div class="system-example">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Pigpen_cipher_key.svg/1200px-Pigpen_cipher_key.svg.png" alt="Clave del cifrado Pigpen" class="img-fluid" style="max-width: 300px;">
                                </div>
                            </div>
                            
                            <div class="pigpen-translation">
                                <p>Las sociedades secretas usaban este cifrado para proteger sus conocimientos y comunicarse entre iniciados.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 6: Cifrado Vigenère -->
                    <div class="coding-system">
                        <h3>6. Cifrado Vigenère</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>Este cifrado de sustitución polialfabética, desarrollado en el siglo XVI, utiliza una palabra clave para cambiar el valor de cada letra del mensaje. Es mucho más seguro que el Cifrado César.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Elegir una palabra clave.</li>
                                    <li>Repetir la palabra clave bajo el mensaje hasta que tenga la misma longitud.</li>
                                    <li>Para cada letra del mensaje, desplazarla según la letra correspondiente de la clave.</li>
                                </ol>
                                
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong></p>
                                    <p>Mensaje: "ATACAR"</p>
                                    <p>Clave: "LEMON"</p>
                                    <p>Cifrado: "LXMQNC"</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="vigenere-playground">
                                    <div class="input-group">
                                        <label for="vigenereInput">Texto original:</label>
                                        <input type="text" id="vigenereInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <div class="input-group">
                                        <label for="vigenereKey">Clave:</label>
                                        <input type="text" id="vigenereKey" placeholder="Palabra clave">
                                    </div>
                                    <button class="btn btn-secondary encode-vigenere">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="vigenereResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sistema 7: Atbash -->
                    <div class="coding-system">
                        <h3>7. Cifrado Atbash</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>Originario de la Antigua Babilonia, este cifrado invierte el alfabeto, de modo que la primera letra se reemplaza por la última, la segunda por la penúltima, y así sucesivamente.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Para cada letra, encontrar su posición inversa en el alfabeto.</li>
                                    <li>A → Z, B → Y, C → X, etc.</li>
                                </ol>
                                
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong></p>
                                    <p>Texto: "SECRETO"</p>
                                    <p>Cifrado: "HVXIVGL"</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="atbash-playground">
                                    <div class="input-group">
                                        <label for="atbashInput">Texto original:</label>
                                        <input type="text" id="atbashInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-atbash">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="atbashResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 8: Código ASCII -->
                    <div class="coding-system">
                        <h3>8. Código ASCII</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>ASCII (American Standard Code for Information Interchange) es un estándar de codificación que asigna valores numéricos a letras, números y caracteres especiales. Es la base de la codificación de texto en computadoras.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Cada carácter se convierte a su valor numérico según la tabla ASCII.</li>
                                    <li>Los valores resultantes se pueden usar como un código que solo quienes conocen el estándar pueden interpretar.</li>
                                </ol>
                                
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong></p>
                                    <p>"HOLA" → 72 79 76 65</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="ascii-playground">
                                    <div class="input-group">
                                        <label for="asciiInput">Texto original:</label>
                                        <input type="text" id="asciiInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-ascii">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="asciiResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 9: Cifrado Binario -->
                    <div class="coding-system">
                        <h3>9. Cifrado Binario</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>El código binario es el sistema de numeración base 2 (0s y 1s) que subyace en toda la tecnología digital. En el cifrado binario, cada letra y número se convierte en una secuencia de 0s y 1s.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Convertir cada carácter a su código ASCII.</li>
                                    <li>Convertir el código ASCII a su representación binaria.</li>
                                </ol>
                                
                                <div class="system-example">
                                    <p><strong>Ejemplo:</strong></p>
                                    <p>A → 65 (ASCII) → 01000001</p>
                                    <p>"HOLA" → 01001000 01001111 01001100 01000001</p>
                                </div>
                            </div>

                            <div class="system-playground">
                                <h4>Pruébalo:</h4>
                                <div class="binary-playground">
                                    <div class="input-group">
                                        <label for="binaryInput">Texto original:</label>
                                        <input type="text" id="binaryInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-binary">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="binaryResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sistema 10: Cifrado de Sustitución Personalizado -->
                    <div class="coding-system">
                        <h3>10. Cifrado de Sustitución Personalizado</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>En el cifrado de sustitución, cada letra se reemplaza por un símbolo, número u otra letra según una clave predefinida. A diferencia de los cifrados anteriores, este permite crear tu propio alfabeto de sustitución.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <h4>Implementación:</h4>
                                <ol>
                                    <li>Crear un alfabeto de sustitución donde cada letra se asocie con otro carácter.</li>
                                    <li>Aplicar la sustitución según la tabla definida.</li>
                                </ol>
                                
                                <div class="substitution-playground">
                                    <h4>Pruébalo:</h4>
                                    <div class="substitution-key">
                                        <div class="substitution-title">Alfabeto de sustitución:</div>
                                        <div class="substitution-alphabet">
                                            <div class="substitution-row">
                                                <div class="original-letter">A</div>
                                                <input type="text" class="substitute-letter" maxlength="1" value="Z">
                                            </div>
                                            <div class="substitution-row">
                                                <div class="original-letter">B</div>
                                                <input type="text" class="substitute-letter" maxlength="1" value="Y">
                                            </div>
                                            <div class="substitution-row">
                                                <div class="original-letter">C</div>
                                                <input type="text" class="substitute-letter" maxlength="1" value="X">
                                            </div>
                                            <!-- Añadimos un botón para ver o editar el alfabeto completo -->
                                            <button class="btn btn-small btn-secondary toggle-full-alphabet">
                                                Ver alfabeto completo
                                            </button>
                                            <div class="full-alphabet" style="display: none;">
                                                <!-- Se rellenará con JavaScript -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="substitutionInput">Texto original:</label>
                                        <input type="text" id="substitutionInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-substitution">Codificar</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="encoded-result" id="substitutionResult"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sistema 11: Pigpen Interactivo -->
                    <div class="coding-system">
                        <h3>11. Cifrado Pigpen Interactivo</h3>
                        <div class="system-content">
                            <div class="system-description">
                                <p>Este cifrado, popular entre los francmasones, convierte cada letra en un símbolo gráfico basado en la posición de la letra en una rejilla. Ahora puedes ver exactamente cómo se construyen los símbolos para cada letra.</p>
                            </div>
                            
                            <div class="system-implementation">
                                <div class="pigpen-interactive">
                                    <div class="pigpen-chart">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Pigpen_cipher_key.svg/1200px-Pigpen_cipher_key.svg.png" alt="Clave del cifrado Pigpen" class="img-fluid">
                                    </div>
                                    
                                    <div class="input-group">
                                        <label for="pigpenInput">Texto original:</label>
                                        <input type="text" id="pigpenInput" placeholder="Escribe tu mensaje aquí">
                                    </div>
                                    <button class="btn btn-secondary encode-pigpen">Visualizar en Pigpen</button>
                                    <div class="result-container">
                                        <h5>Resultado:</h5>
                                        <div class="pigpen-result-container">
                                            <div class="encoded-result" id="pigpenResult"></div>
                                            <div class="pigpen-symbols" id="pigpenSymbols"></div>
                                        </div>
                                    </div>
                                    <p class="pigpen-note">Nota: Los símbolos son una simulación visual. En un escape room real, podrías usar imágenes impresas o dibujarlos a mano.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botón Ver más -->
                    <div class="show-more-systems">
                        <button class="btn btn-primary show-more-ciphers">
                            <i class="fas fa-plus"></i> Ver más sistemas históricos y modernos
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer" role="contentinfo">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Escapify</h3>
                <p>Plataforma para crear candados digitales para escape rooms educativos.</p>
            </div>
            <div class="footer-section">
                <h3>Accesibilidad</h3>
                <p>Este sitio está optimizado para todos los usuarios, incluyendo características para usuarios con daltonismo, discapacidad visual, auditiva e intelectual.</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Escapify. Desarrollado como herramienta educativa.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/theme.js" type="module"></script>
    <script src="assets/js/nav.js" type="module"></script>
    <script src="assets/js/accessibility.js" type="module"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referencias a elementos DOM
            const searchInput = document.querySelector('.search-box input');
            const typeFilter = document.getElementById('resourceTypeFilter');
            const levelFilter = document.getElementById('educationLevelFilter');
            const resourceCards = document.querySelectorAll('.resource-card');
            const sectionButtons = document.querySelectorAll('.resources-section .btn-primary');
            const resourceSections = document.querySelectorAll('.resources-section');
            
            // Referencias para el modal y sistemas de codificación
            const codingSystemsModal = document.getElementById('codingSystemsModal');
            const viewCodingGuideBtn = document.querySelector('.view-coding-guide');
            const closeModalBtn = document.querySelector('.close-modal');
            const downloadResourceBtn = document.querySelector('.download-resource');
            const printResourceBtn = document.querySelector('.print-resource');
            
            // Referencias para codificadores
            const caesarInput = document.getElementById('caesarInput');
            const caesarShift = document.getElementById('caesarShift');
            const encodeCaesarBtn = document.querySelector('.encode-caesar');
            const caesarResult = document.getElementById('caesarResult');
            
            const morseInput = document.getElementById('morseInput');
            const encodeMorseBtn = document.querySelector('.encode-morse');
            const morseResult = document.getElementById('morseResult');
            const playMorseBtn = document.querySelector('.play-morse');
            
            const showMoreSystemsBtn = document.querySelector('.show-more-systems button');
            
            // Referencias para los nuevos codificadores
            const polybiusInput = document.getElementById('polybiusInput');
            const encodePolybiusBtn = document.querySelector('.encode-polybius');
            const polybiusResult = document.getElementById('polybiusResult');
            
            const vigenereInput = document.getElementById('vigenereInput');
            const vigenereKey = document.getElementById('vigenereKey');
            const encodeVigenereBtn = document.querySelector('.encode-vigenere');
            const vigenereResult = document.getElementById('vigenereResult');
            
            const atbashInput = document.getElementById('atbashInput');
            const encodeAtbashBtn = document.querySelector('.encode-atbash');
            const atbashResult = document.getElementById('atbashResult');
            
            const binaryInput = document.getElementById('binaryInput');
            const encodeBinaryBtn = document.querySelector('.encode-binary');
            const binaryResult = document.getElementById('binaryResult');
            
            // Función para filtrar recursos
            function filterResources() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedType = typeFilter.value;
                const selectedLevel = levelFilter.value;
                
                resourceCards.forEach(card => {
                    const title = card.querySelector('h3').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    const type = card.querySelector('.resource-type').textContent.toLowerCase();
                    const level = card.querySelector('.resource-level').textContent.toLowerCase();
                    
                    // Aplicar filtros
                    const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                    const matchesType = selectedType === 'all' || type.includes(selectedType.toLowerCase());
                    const matchesLevel = selectedLevel === 'all' || level.includes(selectedLevel.toLowerCase());
                    
                    // Mostrar u ocultar según filtros
                    if (matchesSearch && matchesType && matchesLevel) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Comprobar si hay secciones vacías
                resourceSections.forEach(section => {
                    const visibleCards = section.querySelectorAll('.resource-card[style="display: block"]').length;
                    const noResultsElement = section.querySelector('.no-results');
                    
                    if (visibleCards === 0) {
                        // Si no existe un mensaje de "no hay resultados", lo creamos
                        if (!noResultsElement) {
                            const noResults = document.createElement('div');
                            noResults.className = 'no-results';
                            noResults.innerHTML = '<p>No se encontraron recursos que coincidan con los filtros.</p>';
                            section.querySelector('.resources-grid').appendChild(noResults);
                        }
                    } else if (noResultsElement) {
                        // Si hay resultados, eliminamos el mensaje
                        noResultsElement.remove();
                    }
                });
            }
            
            // Event listeners para filtros y búsqueda
            searchInput.addEventListener('input', filterResources);
            typeFilter.addEventListener('change', filterResources);
            levelFilter.addEventListener('change', filterResources);
            
            // Event listeners para botones "Ver todas"
            sectionButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const section = e.target.closest('.resources-section');
                    const sectionId = section.id;
                    const cards = section.querySelectorAll('.resource-card');
                    
                    // Mostrar todas las tarjetas de la sección
                    cards.forEach(card => {
                        card.style.display = 'block';
                    });
                    
                    // Actualizamos los filtros para que coincidan
                    if (sectionId === 'templates') {
                        typeFilter.value = 'template';
                    } else if (sectionId === 'materials') {
                        typeFilter.value = 'material';
                    } else if (sectionId === 'challenges') {
                        typeFilter.value = 'guide';
                    } else if (sectionId === 'gamification') {
                        typeFilter.value = 'kit';
                    } else if (sectionId === 'narratives') {
                        typeFilter.value = 'narrative';
                    }
                    
                    // Actualizar vista
                    filterResources();
                    
                    // Desplazar a la sección de filtros
                    document.querySelector('.filters-section').scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            // Funcionalidad del modal de sistemas de codificación
            if (viewCodingGuideBtn) {
                viewCodingGuideBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openModal(codingSystemsModal);
                });
            }
            
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => {
                    closeModal(codingSystemsModal);
                });
            }
            
            // Cerrar modal al hacer clic fuera de él
            window.addEventListener('click', (e) => {
                if (e.target === codingSystemsModal) {
                    closeModal(codingSystemsModal);
                }
            });
            
            // Cerrar modal con ESC
            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && codingSystemsModal.classList.contains('visible')) {
                    closeModal(codingSystemsModal);
                }
            });
            
            // Funcionalidad de botones en el modal
            if (downloadResourceBtn) {
                downloadResourceBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const resourceId = e.target.closest('.download-resource').dataset.resource;
                    showNotification(`Descargando recurso: ${resourceId}`, 'success');
                });
            }
            
            if (printResourceBtn) {
                printResourceBtn.addEventListener('click', () => {
                    showNotification('Preparando documento para imprimir...', 'success');
                    setTimeout(() => {
                        window.print();
                    }, 500);
                });
            }
            
            // Mostrar más sistemas de codificación
            if (showMoreSystemsBtn) {
                showMoreSystemsBtn.addEventListener('click', () => {
                    showNotification('Próximamente: RSA, Enigma, ADFGVX, Playfair y más sistemas de codificación históricos', 'success');
                });
            }
            
            // Codificador César
            if (encodeCaesarBtn && caesarInput && caesarShift && caesarResult) {
                encodeCaesarBtn.addEventListener('click', () => {
                    const text = caesarInput.value.trim().toUpperCase();
                    const shift = parseInt(caesarShift.value) || 3;
                    
                    if (text) {
                        caesarResult.textContent = applyCaesarCipher(text, shift);
                    } else {
                        showNotification('Por favor, introduce un texto para codificar', 'error');
                    }
                });
            }
            
            // Codificador Morse
            if (encodeMorseBtn && morseInput && morseResult) {
                encodeMorseBtn.addEventListener('click', () => {
                    const text = morseInput.value.trim().toUpperCase();
                    
                    if (text) {
                        morseResult.textContent = textToMorse(text);
                    } else {
                        showNotification('Por favor, introduce un texto para codificar', 'error');
                    }
                });
                
                if (playMorseBtn) {
                    playMorseBtn.addEventListener('click', () => {
                        const morse = morseResult.textContent;
                        if (morse) {
                            playMorseCode(morse);
                        } else {
                            showNotification('Primero debes codificar un texto', 'error');
                        }
                    });
                }
            }
            
            // Codificador Polibio
            if (encodePolybiusBtn && polybiusInput && polybiusResult) {
                encodePolybiusBtn.addEventListener('click', () => {
                    const text = polybiusInput.value.trim().toUpperCase();
                    
                    if (text) {
                        polybiusResult.textContent = applyPolybiusCipher(text);
                    } else {
                        showNotification('Por favor, introduce un texto para codificar', 'error');
                    }
                });
            }
            
            // Codificador Vigenère
            if (encodeVigenereBtn && vigenereInput && vigenereKey && vigenereResult) {
                encodeVigenereBtn.addEventListener('click', () => {
                    const text = vigenereInput.value.trim().toUpperCase();
                    const key = vigenereKey.value.trim().toUpperCase();
                    
                    if (text && key) {
                        vigenereResult.textContent = applyVigenereCipher(text, key);
                    } else {
                        showNotification('Por favor, introduce un texto y una clave para codificar', 'error');
                    }
                });
            }
            
            // Codificador Atbash
            if (encodeAtbashBtn && atbashInput && atbashResult) {
                encodeAtbashBtn.addEventListener('click', () => {
                    const text = atbashInput.value.trim().toUpperCase();
                    
                    if (text) {
                        atbashResult.textContent = applyAtbashCipher(text);
                    } else {
                        showNotification('Por favor, introduce un texto para codificar', 'error');
                    }
                });
            }
            
            // Codificador Binario
            if (encodeBinaryBtn && binaryInput && binaryResult) {
                encodeBinaryBtn.addEventListener('click', () => {
                    const text = binaryInput.value.trim();
                    
                    if (text) {
                        binaryResult.textContent = textToBinary(text);
                    } else {
                        showNotification('Por favor, introduce un texto para codificar', 'error');
                    }
                });
            }
            
            // Botones de descargar y ver guía (excepto el de codificación)
            document.querySelectorAll('.resource-card .btn-secondary:not(.view-coding-guide)').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const resourceTitle = this.closest('.resource-card').querySelector('h3').textContent;
                    showNotification(`Recurso "${resourceTitle}" descargado o visualizado correctamente`, 'success');
                });
            });
            
            // Botones de la sección de comunidad
            document.querySelectorAll('.community-section .btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const action = this.textContent.trim();
                    showNotification(`Acción "${action}" iniciada. Esta funcionalidad estará disponible próximamente.`, 'success');
                });
            });
            
            // Función para mostrar notificaciones
            function showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.setAttribute('role', 'alert');
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            
            // Funciones auxiliares para los sistemas de codificación
            
            // Abrir modal
            function openModal(modal) {
                modal.classList.add('visible');
                document.body.style.overflow = 'hidden'; // Evitar scroll en el fondo
            }
            
            // Cerrar modal
            function closeModal(modal) {
                modal.classList.remove('visible');
                document.body.style.overflow = '';
            }
            
            // Cifrado César
            function applyCaesarCipher(text, shift) {
                return Array.from(text).map(char => {
                    // Si el carácter es una letra, aplicamos el cifrado
                    if (/[A-Z]/.test(char)) {
                        const code = char.charCodeAt(0);
                        return String.fromCharCode(((code - 65 + shift) % 26) + 65);
                    }
                    // Si no es una letra, lo dejamos igual
                    return char;
                }).join('');
            }
            
            // Convertir texto a código Morse
            function textToMorse(text) {
                const morseCode = {
                    'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....',
                    'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.',
                    'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-',
                    'Y': '-.--', 'Z': '--..', '0': '-----', '1': '.----', '2': '..---', '3': '...--', '4': '....-',
                    '5': '.....', '6': '-....', '7': '--...', '8': '---..', '9': '----.', ' ': '/'
                };
                
                return Array.from(text).map(char => {
                    return morseCode[char] || char;
                }).join(' ');
            }
            
            // Reproducir código Morse como sonido
            function playMorseCode(morse) {
                // Función mejorada para reproducir código morse con manejo de AudioContext moderno
                let audioContext;
                
                // Intentar crear el contexto de audio
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.error('Error creando AudioContext:', e);
                    showNotification('Tu navegador no soporta la reproducción de audio', 'error');
                    return;
                }
                
                // Si el contexto está suspendido (navegadores modernos), intentar resumir
                if (audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        playMorseSequence(audioContext, morse);
                    }).catch((e) => {
                        console.error('Error resumiendo AudioContext:', e);
                        showNotification('No se pudo inicializar el audio. Intenta hacer clic en cualquier parte de la página primero.', 'error');
                    });
                } else {
                    playMorseSequence(audioContext, morse);
                }
                
                function playMorseSequence(context, morseText) {
                    const dot = 60; // Duración de un punto en ms
                    const dash = dot * 3; // Duración de una raya
                    const pauseElement = dot; // Pausa entre elementos
                    const pauseChar = dot * 3; // Pausa entre caracteres
                    const pauseWord = dot * 7; // Pausa entre palabras
                    
                    let time = context.currentTime;
                    
                    morseText.split('').forEach(char => {
                        if (char === '.') {
                            playBeep(context, time, dot);
                            time += dot/1000 + pauseElement/1000;
                        } else if (char === '-') {
                            playBeep(context, time, dash);
                            time += dash/1000 + pauseElement/1000;
                        } else if (char === ' ') {
                            time += pauseChar/1000;
                        } else if (char === '/') {
                            time += pauseWord/1000;
                        }
                    });
                    
                    // Mostrar notificación de éxito
                    showNotification('Reproduciendo código morse...', 'success');
                }
                
                function playBeep(context, startTime, duration) {
                    try {
                        const oscillator = context.createOscillator();
                        const gainNode = context.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(context.destination);
                        oscillator.frequency.value = 700; // Frecuencia del tono
                        oscillator.type = 'sine';
                        
                        // Configurar el volumen con fade in/out para evitar clicks
                        gainNode.gain.setValueAtTime(0.001, startTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.3, startTime + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + duration/1000);
                        
                        oscillator.start(startTime);
                        oscillator.stop(startTime + duration/1000 + 0.05);
                    } catch (e) {
                        console.error('Error reproduciendo beep:', e);
                    }
                }
            }
            
            // Cifrado de Polibio
            function applyPolybiusCipher(text) {
                const polybius = {
                    'A': '11', 'B': '12', 'C': '13', 'D': '14', 'E': '15',
                    'F': '21', 'G': '22', 'H': '23', 'I': '24', 'J': '24', 'K': '25',
                    'L': '31', 'M': '32', 'N': '33', 'O': '34', 'P': '35',
                    'Q': '41', 'R': '42', 'S': '43', 'T': '44', 'U': '45',
                    'V': '51', 'W': '52', 'X': '53', 'Y': '54', 'Z': '55'
                };
                
                return Array.from(text).map(char => {
                    if (/[A-Z]/.test(char)) {
                        return polybius[char] || char;
                    }
                    return char;
                }).join(' ');
            }
            
            // Cifrado Vigenère
            function applyVigenereCipher(text, key) {
                if (!key) return text;
                
                key = key.toUpperCase().replace(/[^A-Z]/g, '');
                if (key.length === 0) return text;
                
                let result = '';
                let keyIndex = 0;
                
                for (let i = 0; i < text.length; i++) {
                    const char = text[i];
                    if (/[A-Z]/.test(char)) {
                        // Obtener valores numéricos (0-25) para la letra actual y la letra de la clave
                        const charCode = char.charCodeAt(0) - 65;
                        const keyChar = key[keyIndex % key.length];
                        const keyCode = keyChar.charCodeAt(0) - 65;
                        
                        // Aplicar el cifrado Vigenère según la tabla tradicional:
                        // Para ATACAR + LEMON debemos obtener LXFOPV
                        const encodedCharCode = (charCode + keyCode) % 26;
                        
                        // Convertir de nuevo a letra
                        result += String.fromCharCode(encodedCharCode + 65);
                        
                        // Avanzar a la siguiente letra de la clave
                        keyIndex++;
                    } else {
                        result += char;
                    }
                }
                return result;
            }
            
            // Cifrado Atbash
            function applyAtbashCipher(text) {
                return Array.from(text).map(char => {
                    if (/[A-Z]/.test(char)) {
                        // Invertir la posición en el alfabeto: Z->A, Y->B, etc.
                        return String.fromCharCode(155 - char.charCodeAt(0));
                    }
                    return char;
                }).join('');
            }
            
            // Convertir texto a binario
            function textToBinary(text) {
                return Array.from(text).map(char => {
                    const binary = char.charCodeAt(0).toString(2);
                    // Asegurar que cada carácter tiene 8 bits (rellenar con ceros)
                    return '0'.repeat(8 - binary.length) + binary;
                }).join(' ');
            }
            
            // Inicializar página con todos los recursos visibles
            resourceCards.forEach(card => {
                card.style.display = 'block';
            });

            // Selecciona el botón de vista previa de candado numérico
            const previewBtn = document.querySelector('.resource-card a.btn-preview[href$="plantilla-candado-numerico.html"]');
            if (previewBtn) {
                previewBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    // 1. Intenta detectar por clase en <html>
                    let theme = '';
                    if (document.documentElement.classList.contains('dark')) {
                        theme = 'dark';
                    } else if (document.documentElement.classList.contains('light')) {
                        theme = 'light';
                    }
                    // 2. Si no hay clase, intenta por localStorage
                    if (!theme) {
                        const stored = localStorage.getItem('theme');
                        if (stored === 'dark' || stored === 'light') {
                            theme = stored;
                        }
                    }
                    // 3. Si no hay nada, usa el modo del sistema
                    if (!theme) {
                        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                    }
                    // 4. Abre la vista previa con el parámetro correcto
                    const url = '/recursos/plantilla-candado-numerico.html?theme=' + theme;
                    window.open(url, '_blank');
                });
            }
        });
    </script>
</body>
</html> 